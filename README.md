# Go-DDNS: ä¸€ä¸ªç®€å•çš„åŠ¨æ€åŸŸåè§£æå·¥å…·

![Go Version](https://img.shields.io/badge/Go-1.18+-blue.svg)
![License](https://img.shields.io/badge/license-MIT-green.svg)
![Platform](https://img.shields.io/badge/platform-linux%20%7C%20windows%20%7C%20macos-lightgrey.svg)

ä½¿ç”¨ Go è¯­è¨€ç¼–å†™çš„è½»é‡çº§åŠ¨æ€åŸŸåè§£æï¼ˆDDNSï¼‰å·¥å…·ï¼Œç”¨äºè§£å†³åœ¨å®¶åº­æˆ–åŠå…¬å®½å¸¦ç­‰åŠ¨æ€å…¬ç½‘IPç¯å¢ƒä¸‹ï¼Œéšæ—¶é€šè¿‡å›ºå®šåŸŸåè®¿é—®å†…éƒ¨æœåŠ¡å™¨çš„éœ€æ±‚ã€‚

---

## ğŸš€ é¡¹ç›®ç‰¹ç‚¹

- **ç®€å•é«˜æ•ˆ**: æ ¸å¿ƒä»£ç ç®€æ´ï¼Œèµ„æºå ç”¨ä½ï¼Œæ˜“äºç†è§£å’Œéƒ¨ç½²ã€‚
- **è·¨å¹³å°**: åŸºäºGoè¯­è¨€çš„ç‰¹æ€§ï¼Œå¯è½»æ¾äº¤å‰ç¼–è¯‘ï¼Œåœ¨ Linux, Windows, macOS ç­‰ä¸»æµæ“ä½œç³»ç»Ÿä¸Šè¿è¡Œã€‚
- **é…ç½®çµæ´»**: æ‰€æœ‰å…³é”®å‚æ•°ï¼ˆå¦‚å¯†é’¥ã€åŸŸåã€ç«¯å£ç­‰ï¼‰å‡é€šè¿‡é…ç½®æ–‡ä»¶ç®¡ç†ï¼Œæ— éœ€ä¿®æ”¹ä»£ç ã€‚
- **é«˜å¯ç”¨æ€§**: é¡¹ç›®å†…ç½®äº†æ‰€æœ‰ä¾èµ–ï¼ˆ`vendor`ç›®å½•ï¼‰ï¼Œå…‹éš†åå³å¯ç›´æ¥ç¼–è¯‘ï¼Œæ— éœ€æ‹…å¿ƒå› ç½‘ç»œé—®é¢˜å¯¼è‡´çš„ä¾èµ–ä¸‹è½½å¤±è´¥ã€‚
- **å®‰å…¨**: å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯é€šè¿‡è‡ªå®šä¹‰çš„`secret_token`è¿›è¡Œè®¤è¯ï¼Œé˜²æ­¢APIè¢«æ¶æ„è°ƒç”¨ã€‚é˜¿é‡Œäº‘å‡­è¯é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼Œä¸æš´éœ²åœ¨ä»£ç æˆ–é…ç½®æ–‡ä»¶ä¸­ã€‚

## ğŸ—ï¸ æ¶æ„

æœ¬å·¥å…·ç”±ä¸€ä¸ªæœåŠ¡ç«¯ç¨‹åºå’Œä¸€ä¸ªå®¢æˆ·ç«¯ç¨‹åºç»„æˆï¼š

- **æœåŠ¡ç«¯ (`ddns-server`)**: éƒ¨ç½²åœ¨å…·æœ‰å›ºå®šå…¬ç½‘IPçš„æœåŠ¡å™¨ä¸Šï¼ˆå¦‚é˜¿é‡Œäº‘ECSï¼‰ã€‚å®ƒè´Ÿè´£æ¥æ”¶å®¢æˆ·ç«¯çš„IPæ›´æ–°è¯·æ±‚ï¼Œå¹¶è°ƒç”¨é˜¿é‡Œäº‘çš„â€œäº‘è§£æDNSâ€APIæ¥ä¿®æ”¹åŸŸåçš„Aè®°å½•ã€‚
- **å®¢æˆ·ç«¯ (`ddns-client`)**: éƒ¨ç½²åœ¨å…¬ç½‘IPåŠ¨æ€å˜åŒ–çš„æœåŠ¡å™¨ä¸Šï¼ˆå¦‚å®¶åº­ç½‘ç»œä¸­çš„æœåŠ¡å™¨ï¼‰ã€‚å®ƒä¼šå®šæœŸæ£€æµ‹æœ¬æœºçš„å…¬ç½‘IPï¼Œå¹¶åœ¨IPå‘ç”Ÿå˜åŒ–æ—¶é€šçŸ¥æœåŠ¡ç«¯è¿›è¡Œæ›´æ–°ã€‚

## âš™ï¸ ä½¿ç”¨æ–¹æ³• (é’ˆå¯¹æ™®é€šç”¨æˆ·)

å¦‚æœæ‚¨ä¸æƒ³è‡ªå·±ç¼–è¯‘ï¼Œæœ€ç®€å•çš„æ–¹å¼æ˜¯ä»æœ¬ä»“åº“çš„ **Releases** é¡µé¢ä¸‹è½½å·²ç¼–è¯‘å¥½çš„å¯æ‰§è¡Œç¨‹åºã€‚

### ç¬¬1æ­¥ï¼šä¸‹è½½ç¨‹åº

è®¿é—®æœ¬é¡¹ç›®çš„ [Releases é¡µé¢](https://github.com/keepsea/goddns/releases) (è¯·å°† `keepsea/goddns` æ›¿æ¢ä¸ºæ‚¨çš„å®é™…ä»“åº“åœ°å€)ï¼Œæ ¹æ®æ‚¨çš„æ“ä½œç³»ç»Ÿä¸‹è½½å¯¹åº”çš„æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ç¨‹åºã€‚

- `ddns-server-linux`: ç”¨äºLinuxæœåŠ¡å™¨çš„æœåŠ¡ç«¯ã€‚
- `ddns-client-linux`: ç”¨äºLinuxæœåŠ¡å™¨çš„å®¢æˆ·ç«¯ã€‚
- `ddns-client.exe`: ç”¨äºWindowsçš„å®¢æˆ·ç«¯ã€‚
- `ddns-client-macos-intel`: ç”¨äºmacOS (IntelèŠ¯ç‰‡)çš„å®¢æˆ·ç«¯ã€‚
- `ddns-client-macos-arm`: ç”¨äºmacOS (AppleèŠ¯ç‰‡)çš„å®¢æˆ·ç«¯ã€‚

### ç¬¬2æ­¥ï¼šé…ç½®

ä¸‹è½½åï¼Œæ‚¨éœ€è¦ä¸ºæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯åˆ†åˆ«åˆ›å»ºä¸€ä¸ª`config.ini`é…ç½®æ–‡ä»¶ã€‚

**æœåŠ¡ç«¯ `config.ini` (æ”¾ç½®åœ¨ `ddns-server-linux` åŒä¸€ç›®å½•):**
```ini
[server]
# æœåŠ¡ç›‘å¬çš„ç«¯å£
listen_port = 9876
# ç”¨äºä¸å®¢æˆ·ç«¯é€šä¿¡çš„è®¤è¯å¯†é’¥ï¼Œè¯·åŠ¡å¿…ä¿®æ”¹ä¸ºä¸€ä¸ªå¤æ‚çš„éšæœºå­—ç¬¦ä¸²
secret_token = YOUR_SUPER_SECRET_TOKEN
```

**å®¢æˆ·ç«¯ `config.ini` (æ”¾ç½®åœ¨å®¢æˆ·ç«¯ç¨‹åºåŒä¸€ç›®å½•):**
```ini
[client]
# DDNSæœåŠ¡ç«¯çš„å®Œæ•´URLåœ°å€ï¼Œè¯·åŠ¡å¿…ä¿®æ”¹ä¸ºæ‚¨çš„ECSå…¬ç½‘IPå’Œæ‚¨è®¾ç½®çš„ç«¯å£
server_url = http://YOUR_ECS_PUBLIC_IP:9876/update-dns
# è®¤è¯å¯†é’¥ï¼Œå¿…é¡»ä¸æœåŠ¡ç«¯è®¾ç½®çš„å®Œå…¨ä¸€è‡´
secret_token = YOUR_SUPER_SECRET_TOKEN
# æ‚¨çš„ä¸»åŸŸåï¼Œä¾‹å¦‚ yourdomain.com
domain_name = yourdomain.com
# æ‚¨è¦æ›´æ–°çš„å­åŸŸå (ä¸»æœºè®°å½•)ï¼Œä¾‹å¦‚ home
rr = home
# æ£€æŸ¥å…¬ç½‘IPçš„æ—¶é—´é—´éš”ï¼ˆç§’ï¼‰ï¼Œä¾‹å¦‚300ç§’ï¼ˆ5åˆ†é’Ÿï¼‰
check_interval_seconds = 300
```

### ç¬¬3æ­¥ï¼šè¿è¡Œç¨‹åº

#### æœåŠ¡ç«¯ (åœ¨é˜¿é‡Œäº‘ECSä¸Š)
1.  **è®¾ç½®é˜¿é‡Œäº‘å‡­è¯** (åªéœ€é¦–æ¬¡é…ç½®):
    ```bash
    export ALIBABA_CLOUD_ACCESS_KEY_ID="YOUR_ACCESS_KEY_ID"
    export ALIBABA_CLOUD_ACCESS_KEY_SECRET="YOUR_ACCESS_KEY_SECRET"
    ```
    *å»ºè®®å°†è¿™ä¸¤è¡Œå†™å…¥ `/etc/profile` æˆ– `~/.bash_profile` ä½¿å…¶æ°¸ä¹…ç”Ÿæ•ˆã€‚*

2.  **é…ç½®å®‰å…¨ç»„**ï¼šç™»å½•é˜¿é‡Œäº‘æ§åˆ¶å°ï¼Œç¡®ä¿ECSçš„å®‰å…¨ç»„å·²ç»æ”¾è¡Œäº†æ‚¨åœ¨`config.ini`ä¸­è®¾ç½®çš„`listen_port`ã€‚

3.  **å¯åŠ¨æœåŠ¡**:
    ```bash
    chmod +x ./ddns-server-linux
    nohup ./ddns-server-linux > ddns.log 2>&1 &
    ```

#### å®¢æˆ·ç«¯ (åœ¨å®¶åº­æœåŠ¡å™¨/Windows/macOSä¸Š)
- **åœ¨ Linux / macOS ä¸Š**:
    ```bash
    chmod +x ./ddns-client-linux
    nohup ./ddns-client-linux > ddns-client.log 2>&1 &
    ```

- **åœ¨ Windows ä¸Š**:
    ç›´æ¥**åŒå‡» `ddns-client.exe`** å³å¯åœ¨åå°è¿è¡Œã€‚

## ğŸ‘¨â€ğŸ’» ä»æºç ç¼–è¯‘ (é’ˆå¯¹å¼€å‘è€…)

å¦‚æœæ‚¨æƒ³è‡ªè¡Œä¿®æ”¹å’Œç¼–è¯‘ï¼Œè¯·æŒ‰ä»¥ä¸‹æ­¥éª¤æ“ä½œã€‚

1.  **å…‹éš†ä»“åº“**:
    ```bash
    git clone [https://github.com/keepsea/goddns.git](https://github.com/keepsea/goddns.git)
    cd goddns
    ```
2.  **ç¼–è¯‘**:
    æœ¬é¡¹ç›®å·²åŒ…å«æ‰€æœ‰ä¾èµ– (`vendor`ç›®å½•)ï¼Œæ‚¨æ— éœ€ä¸‹è½½ä»»ä½•ä¸œè¥¿ï¼Œå¯ä»¥ç›´æ¥ç¼–è¯‘ã€‚åœ¨ç›¸åº”çš„é¡¹ç›®ç›®å½•ä¸‹ï¼Œä½¿ç”¨ `go build` å‘½ä»¤è¿›è¡Œç¼–è¯‘ã€‚ä¾‹å¦‚ï¼Œä¸ºLinuxç¼–è¯‘æœåŠ¡ç«¯ï¼š
    ```bash
    cd ddns-server
    go build -mod=vendor -o ddns-server-linux main.go
    ```-mod=vendor` æ ‡å¿—å‘Šè¯‰Goå‘½ä»¤ä½¿ç”¨é¡¹ç›®å†…ç½®çš„ä¾èµ–è¿›è¡Œç¼–è¯‘ã€‚
